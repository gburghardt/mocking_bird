/*! MockingBird v1.0.2 2015-05-20 */
;var MockingBird={interceptAjax:function(a){return new MockingBird.XMLHttpRequestInterceptor(a)}};MockingBird.XMLHttpRequest=function XMLHttpRequest(){this._requestHeaders={};this._responseHeaders={}};MockingBird.XMLHttpRequest.prototype={_async:true,_connectionStrategy:null,_method:null,_requestHeaders:null,_responseHeaders:null,_data:null,_password:null,_url:null,_username:null,constructor:MockingBird.XMLHttpRequest,returns:function(b,a,c){return this._connectionStrategy=new MockingBird.XMLHttpRequest.SimpleConnectionStrategy(this).status(b).body(a||null).headers(c||{})},connects:function(){return this._connectionStrategy=new MockingBird.XMLHttpRequest.ConnectionBuilderStrategy(this).connects()},changeState:function(a,b){this.readyState=a;this.status=b;if(this.readyState===this.DONE){this.responseXML=this._parseResponseText()}this.onreadystatechange()},delayExecution:function(){return this._connectionStrategy=new MockingBird.XMLHttpRequest.ConnectionBuilderStrategy(this).delayExecution()},getAllRequestHeaders:function(){return this._requestHeaders},getLastRequest:function(){return new MockingBird.XMLHttpRequest.RequestInfo(this)},_parseResponseText:function(){var c=null,d,a;if(this.responseText){try{d=new DOMParser();c=d.parseFromString(this.responseText,"application/xml");if(c.getElementsByTagName("parsererror").length>0){c=null}}catch(b){c=null}}return c},resetRequest:function(){this.readyState=this.UNSENT;this.status=0;this.responseText=null;this.responseXML=null},DONE:4,HEADERS_RECEIVED:2,LOADING:3,OPENED:1,UNSENT:0,readyState:0,responseText:null,responseXML:null,status:0,onreadystatechange:function(){},abort:function(){this.resetRequest();this.changeState(this.UNSENT,0)},getAllResponseHeaders:function(){return this._responseHeaders},getResponseHeader:function(a){return this._responseHeaders.hasOwnProperty(a)?this._responseHeaders[a]:null},getRequestHeader:function(a){return this._requestHeaders.hasOwnProperty(a)?this._requestHeaders[a]:null},setResponseHeaders:function(a){this._responseHeaders=a},setRequestHeader:function(a,b){this._requestHeaders[a]=b},open:function(e,b,c,d,a){this._method=e;this._url=b;this._async=!!c;this._username=d;this._password=a;this.changeState(this.OPENED,0)},overrideMimeType:function(a){this._mimeType=a},send:function(a){this._data=a;this._connectionStrategy.execute(a)}};MockingBird.XMLHttpRequest.ConnectionBuilderStrategy=function ConnectionBuilderStrategy(a){this.chunks=[];this._events=[];this.xhr=a};MockingBird.XMLHttpRequest.ConnectionBuilderStrategy.prototype={chunks:null,_delayExecution:false,_events:null,requestBody:null,xhr:null,constructor:MockingBird.XMLHttpRequest.ConnectionBuilderStrategy,_addChunk:function(a){return this.chunks.push(this._chunkToString(a))-1},_addEvent:function(a){if(this._delayExecution){a.call(this,this.xhr)}else{this._events.push(a)}},connects:function(){this._addEvent(function(a){a.changeState(a.OPENED,0)});return this},delayExecution:function(){this._delayExecution=true;return this},disconnects:function(){this._addEvent(function(a){a.resetRequest();a.changeState(a.UNSENT,0)});return this},done:function(b,a){if(a&&this.chunks.length){this._addChunk(a)}this._addEvent(function(c){if(this.chunks.length){c.responseText=this.joinChunks()}else{c.responseText=this._chunkToString(a);c.changeState(c.LOADING,b)}c.changeState(c.DONE,b)})},execute:function(c){this.requestBody=this._chunkToString(c);if(this._delayExecution){return}if(!this._events.length){throw new Error("No request lifecycle events have been added to this strategy")}for(var a=0,b=this._events.length;a<b;a++){this._events[a].call(this,this.xhr)}},joinChunks:function(){return this.chunks.join("")},receivesChunk:function(a,b){var c=this._addChunk(b);this._addEvent(function(d){d.responseText=(d.responseText||"")+this.chunks[c];d.changeState(d.LOADING,a||200)});return this},receivesHeaders:function(a,b){this._addEvent(function(c){c.setResponseHeaders(b||{});c.changeState(c.HEADERS_RECEIVED,a||200)});return this},_chunkToString:function(a){if(a===undefined||a===null){return null}return typeof a==="object"?JSON.stringify(a):String(a)}};MockingBird.XMLHttpRequest.MockBuilder=function MockBuilder(e,b,c,d,a){this.method=e.toUpperCase();this.url=b;this.async=typeof c==="boolean"?c:true;this.username=d||null;this.password=a||null};MockingBird.XMLHttpRequest.MockBuilder.prototype={async:true,method:null,password:null,strategy:null,url:null,username:null,constructor:MockingBird.XMLHttpRequest.MockBuilder,chunks:function(a,f,e){if(!f||!f.length){throw new Error("Missing or empty argument: chunks")}var d=this.connects().receivesHeaders(a,e||{});for(var b=0,c=f.length-1;b<c;b++){d.receivesChunk(a,f[b])}if(c>-1){d.done(a,f[c])}return d},connects:function(){return this.strategy=new MockingBird.XMLHttpRequest().connects()},getRequest:function(){return this.strategy.xhr},matches:function(e,b,c,d,a){return this.method==e.toUpperCase()&&this.url==b&&this.async==c&&this.username==d&&this.password==a},returns:function(b,a,c){return this.strategy=new MockingBird.XMLHttpRequest().returns(b,a,c)}};MockingBird.XMLHttpRequest.RequestInfo=function RequestInfo(a){this.method=a._method;this.url=a._url;this.async=a._async;this.username=a._username;this.password=a._password;this.data=a._data;this.status=a.status;this.requestHeaders=Object.create(a._requestHeaders);this.responseHeaders=Object.create(a._responseHeaders);this.responseText=a.responseText;this.responseXML=a.responseXML;this.readyState=a.readyState};MockingBird.XMLHttpRequest.RequestInfo.prototype={constructor:MockingBird.XMLHttpRequest.RequestInfo,getRequestHeader:function(a){return a in this.requestHeaders?this.requestHeaders[a]:null},hasRequestHeader:function(a){return !!this.getRequestHeader(a)},getResponseHeader:function(a){return a in this.responseHeaders?this.responseHeaders[a]:null},hasResponseHeader:function(a){return !!this.getResponseHeader(a)},isComplete:function(){return this.readyState===4},isGet:function(){return(this.method||"").toUpperCase()==="GET"},isDelete:function(){return(this.method||"").toUpperCase()==="DELETE"},isHead:function(){return(this.method||"").toUpperCase()==="HEAD"},isPost:function(){return(this.method||"").toUpperCase()==="POST"},isPut:function(){return(this.method||"").toUpperCase()==="PUT"},isTeapot:function(){return this.status===418}};MockingBird.XMLHttpRequest.SimpleConnectionStrategy=function SimpleConnectionStrategy(a){this._headers={};this.xhr=a};MockingBird.XMLHttpRequest.SimpleConnectionStrategy.prototype={_body:null,_headers:null,_status:200,xhr:null,constructor:MockingBird.XMLHttpRequest.SimpleConnectionStrategy,body:function(a){if(a===undefined||a===null){this._body=null}else{this._body=typeof a=="object"?JSON.stringify(a):String(a)}return this},execute:function(a){if(this.xhr.readyState!=this.xhr.OPENED){this.xhr.changeState(this.xhr.OPENED,0)}this.xhr.setResponseHeaders(this._headers);this.xhr.changeState(this.xhr.HEADERS_RECEIVED,this._status);this.xhr.responseText=this._body;this.xhr.changeState(this.xhr.LOADING,this._status);this.xhr.changeState(this.xhr.DONE,this._status)},headers:function(b){for(var a in b){if(b.hasOwnProperty(a)){this._headers[a]=b[a]}}return this},status:function(a){this._status=a;return this}};MockingBird.XMLHttpRequestInterceptor=function XMLHttpRequestInterceptor(a){if("XMLHttpRequest" in a){this.OriginalXMLHttpRequest=a.XMLHttpRequest;a.XMLHttpRequest=this.getXMLHttpRequestFactory(this);this.global=a}else{throw new Error("No XMLHttpRequest constructor was found in "+Object.prototype.toString.call(a))}this.mocks=[]};MockingBird.XMLHttpRequestInterceptor.prototype={global:null,mocks:null,OriginalXMLHttpRequest:null,constructor:MockingBird.XMLHttpRequestInterceptor,destroy:function(){if(this.global){this.global.XMLHttpRequest=this.OriginalXMLHttpRequest}this.mocks=this.global=this.OriginalXMLHttpRequest=null},getRequest:function(f,b,d,e,a){var c=this.mocks.length;d=typeof d==="boolean"?d:true;while(c--){if(this.mocks[c].matches(f,b,d,e,a)){return this.mocks[c].getRequest()}}throw new MockingBird.XMLHttpRequestMockNotFoundError(f,b,d,e,a)},getXMLHttpRequestFactory:function(b){return function a(){return new MockingBird.XMLHttpRequestProxy(b)}},mock:function(f,c,d,e,b){var a=new MockingBird.XMLHttpRequest.MockBuilder(f,c,d,e,b);this.mocks.push(a);return a}};MockingBird.XMLHttpRequestMockNotFoundError=function XMLHttpRequestMockNotFoundError(f,c,d,e,b){var a=new Error("No mock registered for "+f+" "+c+" (async: "+d+"; username: "+e+"; password: "+b+")");a.name="MockingBird.XMLHttpRequestMockNotFoundError";return a};MockingBird.XMLHttpRequestProxy=function XMLHttpRequestProxy(c){var b=null,a=function(){};Object.defineProperty(this,"onreadystatechange",{get:function(){return a},set:function(d){a=d;if(b){b.onreadystatechange=d}}});Object.defineProperty(this,"readyState",{get:function(){return b?b.readyState:0}});Object.defineProperty(this,"response",{get:function(){return b?b.response:null}});Object.defineProperty(this,"responseText",{get:function(){return b?b.responseText:null}});Object.defineProperty(this,"responseType",{get:function(){return b?b.responseType:null}});Object.defineProperty(this,"responseXML",{get:function(){return b?b.responseXML:null}});Object.defineProperty(this,"status",{get:function(){return b?b.status:0}});Object.defineProperty(this,"xhr",{get:function(){return b}});this.abort=function(){b.abort()};this.getAllResponseHeaders=function(){return b.getAllResponseHeaders()};this.getResponseHeader=function(d){return b.getResponseHeader(d)};this.open=function(h,f,g,d,e){b=c.getRequest(h,f,g,d,e);b.onreadystatechange=a;b.open(h,f,g,d,e)};this.overrideMimeType=function(d){b.overrideMimeType(d)};this.send=function(){if(arguments.length===1){b.send(arguments[0])}else{b.send(null)}};this.setRequestHeader=function(d,e){b.setRequestHeader(d,e)}};MockingBird.XMLHttpRequestProxy.prototype={constructor:MockingBird.XMLHttpRequestProxy,UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};